(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{13:function(e,t,r){},14:function(e,t,r){"use strict";r.r(t);var a,n=r(3),h=r(1),i=r(2),o=r(5),s=r(4),u=r(0),l=r.n(u),g=r(7),c=r.n(g);r(13);!function(e){e[e.blocked=0]="blocked",e[e.regular=1]="regular",e[e.hard=2]="hard",e[e.regularHighway=3]="regularHighway",e[e.hardHighway=4]="hardHighway",e[e.path=5]="path",e[e.start=6]="start",e[e.end=7]="end"}(a||(a={}));var d=function(){function e(t,r,n){Object(h.a)(this,e),this.xChord=void 0,this.yChord=void 0,this.type=void 0,this.xChord=t,this.yChord=r,this.type=n||a.regular}return Object(i.a)(e,[{key:"setType",value:function(e){this.type=e}},{key:"getType",value:function(){return this.type}},{key:"getChords",value:function(){var e=[2];return e[0]=this.xChord,e[1]=this.yChord,e}},{key:"setToHighway",value:function(){this.type===a.hard?this.setType(a.hardHighway):this.type===a.regular&&this.setType(a.regularHighway)}},{key:"clone",value:function(){var t=new e(this.xChord,this.yChord);return t.type=this.type,t}},{key:"getTileChar",value:function(){switch(this.type){case a.blocked:case a.regular:case a.hard:case a.regularHighway:case a.hardHighway:return" ";case a.path:return">";case a.start:return"S";case a.end:return"E";default:return"!"}}}]),e}();function f(e,t){var r=e[0]-t[0],a=e[1]-t[1];return Math.sqrt(r*r+a*a)}var p;!function(e){e[e.none=0]="none",e[e.down=1]="down",e[e.right=2]="right",e[e.up=3]="up",e[e.left=4]="left",e[e.outbounds=5]="outbounds"}(p||(p={}));var y,v=function(){function e(){Object(h.a)(this,e),this.map=void 0,this.start=void 0,this.end=void 0,this.map=[];for(var t=0;t<120;++t){this.map[t]=new Array;for(var r=0;r<160;++r)this.map[t].push(new d(r,t))}for(this.genHardCells(),this.genHighWays(),this.genBlockCells(),this.start=this.genPoint(),this.end=this.genPoint();f(this.start,this.end)<100;)this.start=this.genPoint(),this.end=this.genPoint();this.setPoints()}return Object(i.a)(e,[{key:"printMap",value:function(){for(var e="",t=0;t<120;++t){for(var r=0;r<160;++r)t==this.start[1]&&r===this.start[0]?e+="S":t==this.end[1]&&r===this.end[0]?e+="E":e+=this.map[t][r].getTileChar();console.log(e),e=""}console.log()}},{key:"genHardCells",value:function(){for(var e=0;e<8;++e){var t=Math.floor(160*Math.random()),r=Math.floor(120*Math.random()),n=t-16>0?t-16:0,h=r-16>0?r-16:0,i=t+16<160?t+16:160,o=r+16<120?r+16:120;console.log("xStart:"+n+" xEnd:"+i+" yStart:"+h+" yEnd:"+o);for(var s=h;s<o;++s)for(var u=n;u<i;++u){1===Math.floor(2*Math.random())&&this.map[s][u].setType(a.hard)}}}},{key:"walkHighwayGen",value:function(e,t){var r=e,a=e.getChords();if(void 0===e)return console.log(),console.log("ded"),console.log(),r;var n=a[0],h=a[1];switch(t){case p.down:if(h+1>=120)return console.log("Over height"),e;h++;break;case p.left:if(n+1>=160)return console.log("Over width"),e;n++;break;case p.up:if(h-1<0)return console.log("under height"),e;h--;break;case p.right:if(n-1<0)return console.log("under width"),e;n--;break;default:return console.log("walking is wrong"),e}return void 0===this.map[h]?(console.log("map undefiend"),e):void 0===(r=this.map[h][n])?(console.log(),console.log("null tile ref"),console.log("last tile chords: "+e.getChords()),console.log("new Chords: "+n+","+h),console.log("dir: "+t),console.log(),e):r}},{key:"genHighWay",value:function(){var e=Math.floor(4*Math.random()),t=0,r=0,n=p.none;e%2===0?(t=Math.floor(160*Math.random()),0===e?(r=0,n=p.down):(r=119,n=p.up)):(r=Math.floor(120*Math.random()),1===e?(t=0,n=p.left):(t=159,n=p.right));for(var h=r,i=t,o=this.map[h][i],s=0;s<5;++s){for(var u=0;u<20;++u){o.setToHighway();var l=this.walkHighwayGen(o,n);if(void 0===l||l===o)return console.log(),console.log("newTile bad "),console.log(),!1;if(l.getType()===a.regularHighway||l.getType()===a.hardHighway)return!1;o=l}var g=Math.floor(10*Math.random());if(g<6);else 0===Math.floor(2*Math.random())?n--:n++,n===p.none&&(n=p.left),n===p.outbounds&&(g=p.down)}return!0}},{key:"copyGrid",value:function(e){for(var t=[],r=0;r<120;++r){t[r]=new Array;for(var a=0;a<160;++a)t[r].push(e[r][a].clone())}return t}},{key:"genHighWays",value:function(){for(var e=0,t=0;e<20&&t<5;){var r=this.copyGrid(this.map);this.genHighWay()?t++:(this.map=r,e++)}return!0}},{key:"genBlockCells",value:function(){for(var e=this,t=[],r=function(){var r=Math.floor(160*Math.random()),n=Math.floor(120*Math.random()),h=e.map[n][r];t.filter((function(e){return e.xChord===h.xChord&&e.yChord===h.yChord})).length>0||h.type===a.hardHighway||h.type===a.regularHighway||t.push(h)};t.length<Math.floor(3840);)r();t.forEach((function(e){return e.setType(a.blocked)}))}},{key:"genPoint",value:function(){for(var e=Math.floor(160*Math.random()),t=Math.floor(120*Math.random());!(e<20||e>139)&&!(t<20||t>99);)e=Math.floor(160*Math.random()),t=Math.floor(120*Math.random());return[e,t]}},{key:"getNeighbors",value:function(e){if(e.length<2)return[];var t=[],r=e[0]-1<0?0:e[0]-1,n=e[1]-1<0?0:e[1]-1,h=n+3<=120?n+3:119,i=r+3<=160?r+3:159;console.log(r,n,i,h);for(var o=n;o<h;++o)for(var s=r;s<i;++s){if(s!==e[0]||o!==e[1])this.map[o][s].getType()!==a.blocked&&t.push(this.map[o][s])}return t}},{key:"getStart",value:function(){return this.map[this.start[1]][this.start[0]]}},{key:"getEnd",value:function(){return this.map[this.end[1]][this.end[0]]}},{key:"updateForPath",value:function(e){for(var t=0;t<e.length;t++){var r=e[t].getChords();this.map[r[1]][r[0]].setType(a.path)}}},{key:"setPoints",value:function(){this.map[this.start[1]][this.start[0]].setType(a.start),this.map[this.end[1]][this.end[0]].setType(a.end)}}]),e}(),m=function e(t,r,a){Object(h.a)(this,e),this.element=void 0,this.f=void 0,this.g=void 0,this.h=void 0,this.parent=void 0,this.element=t,this.f=r,this.h=0,this.g=0,this.parent=a||null},k=function(){function e(){Object(h.a)(this,e),this.que=void 0,this.que=[]}return Object(i.a)(e,[{key:"enqueue",value:function(e,t){for(var r=new m(e,t),a=!1,n=0;n<this.que.length;++n)if(this.que[n].f>r.f){this.que.splice(n,0,r),a=!0;break}a||this.que.push(r)}},{key:"addQueElm",value:function(e){for(var t=!1,r=0;r<this.que.length;++r)if(this.que[r].f>e.f){this.que.splice(r,0,e),t=!0;break}t||this.que.push(e)}},{key:"pop",value:function(){if(!this.isEmpty()){var e=this.que[0];return this.que=this.que.slice(1),e}return null}},{key:"remove",value:function(e){for(var t=0;t<this.que.length;++t)if(this.que[t].element===e)return this.que.splice(t,t+1),!0;return!1}},{key:"isEmpty",value:function(){return!(this.que.length>0)}},{key:"inFringe",value:function(e){for(var t=0;t<this.que.length;++t)if(this.que[t].element===e)return!0;return!1}},{key:"getElm",value:function(e){for(var t=null,r=0;r<this.que.length;++r)this.que[r].element===e&&(t=this.que[r]);return t}}]),e}();function b(e,t){return!(e.xChord===t.xChord||e.yChord===t.yChord)}function H(e,t){if(!function(e){return e.getType()!==a.blocked}(t))return console.log("cant move to blocked tile"),-1;var r=0;e.getType(),t.getType();switch(function(e,t){var r=e.getType(),n=t.getType();if(r===a.regular){if(n===a.regular)return y.regReg;if(n===a.hard)return y.regHard;if(n===a.regularHighway)return y.regRhigh;if(n===a.hardHighway)return y.regHhigh}else if(r===a.hard){if(n===a.regular)return y.regHard;if(n===a.hard)return y.hardHard;if(n===a.regularHighway)return y.hardRhigh;if(n===a.hardHighway)return y.hardHhigh}else if(r===a.regularHighway){if(n===a.regular)return y.regRhigh;if(n===a.hard)return y.hardRhigh;if(n===a.regularHighway)return y.rhRh;if(n===a.hardHighway)return y.rhHh}else if(r===a.hardHighway){if(n===a.regular)return y.regHhigh;if(n===a.hard)return y.hardHhigh;if(n===a.regularHighway)return y.rhHh;if(n===a.hardHighway)return y.hhHh}return y.error}(e,t)){case y.regReg:r=b(e,t)?Math.sqrt(2):1;break;case y.regHard:r=b(e,t)?(Math.sqrt(2)+Math.sqrt(8))/2:1.5;break;case y.regRhigh:r=b(e,t)?Math.sqrt(2):1;break;case y.regHhigh:r=b(e,t)?(Math.sqrt(2)+Math.sqrt(8))/2:1.5;break;case y.hardHard:r=b(e,t)?Math.sqrt(8):2;break;case y.hardRhigh:r=b(e,t)?(Math.sqrt(2)+Math.sqrt(8))/2:1.5;break;case y.hardHhigh:r=b(e,t)?Math.sqrt(8):2;break;case y.rhRh:r=b(e,t)?Math.sqrt(2)/4:1/4;break;case y.rhHh:r=b(e,t)?(Math.sqrt(2)+Math.sqrt(8))/2/4:.375;break;case y.hhHh:r=b(e,t)?Math.sqrt(8)/4:.5;break;default:return console.log("moveCases are wrong"),-1}return r}function w(e){switch(e){case a.blocked:return l.a.createElement("td",{className:"square",style:{background:"black"}});case a.regular:return l.a.createElement("td",{className:"square",style:{background:"blue"}});case a.hard:return l.a.createElement("td",{className:"square",style:{background:"green"}});case a.regularHighway:return l.a.createElement("td",{className:"square",style:{background:"white"}});case a.hardHighway:return l.a.createElement("td",{className:"square",style:{background:"grey"}});case a.path:return l.a.createElement("td",{className:"square",style:{background:"pink"}});case a.start:return l.a.createElement("td",{className:"square",style:{background:"red"}});case a.end:return l.a.createElement("td",{className:"square",style:{background:"orange"}});default:return l.a.createElement("td",{className:"square",style:{background:"brown"}})}}!function(e){e[e.regReg=0]="regReg",e[e.regHard=1]="regHard",e[e.regRhigh=2]="regRhigh",e[e.regHhigh=3]="regHhigh",e[e.hardHard=4]="hardHard",e[e.hardRhigh=5]="hardRhigh",e[e.hardHhigh=6]="hardHhigh",e[e.rhRh=7]="rhRh",e[e.rhHh=8]="rhHh",e[e.hhHh=9]="hhHh",e[e.error=10]="error"}(y||(y={}));l.a.Component;var M=function(e){Object(o.a)(r,e);var t=Object(s.a)(r);function r(e){var a;Object(h.a)(this,r),(a=t.call(this,e)).state={maps:[],pathFound:!1,current:0};for(var i=0;i<5;i++)a.state.maps[i]={map:new v,pathFound:!1};return a.findPath=a.findPath.bind(Object(n.a)(a)),a.log=a.log.bind(Object(n.a)(a)),a.nextMap=a.nextMap.bind(Object(n.a)(a)),a.previousMap=a.previousMap.bind(Object(n.a)(a)),a}return Object(i.a)(r,[{key:"findPath",value:function(){var e=this.state.current;if(!this.state.maps[e].pathFound){var t=this.state.maps[e].map,r=function(e){var t,r=new k,a=[],n=e.getStart(),h=e.getEnd(),i=[];for(r.enqueue(n,0),i.push(n);!r.isEmpty();){var o=r.pop();if(null===o)break;if(o.element===h){for(;null!==o.parent;)i.push(o.element),o=o.parent;return i.reverse()}a.push(o.element);for(var s=e.getNeighbors(o.element.getChords()),u=0;u<s.length;u++){var l=s[u];if(!(a.indexOf(l)>=0)){var g=o.g+H(o.element,l);if(r.inFringe(l)){var c=r.getElm(l);null!==c&&g<c.g&&(c.parent=o,c.g=g,c.f=g+c.h)}else{var d=(t=l,f(h.getChords(),t.getChords())),p=new m(l,0);p.h=d,p.parent=o,p.g=g,p.f=g+d,r.addQueElm(p)}}}}return console.log("failure to find path"),console.log(i),[]}(t);console.log(r),r.length>0&&(t.updateForPath(r),console.log("success"),t.setPoints(),this.state.maps[e].pathFound=!0,this.setState({pathFound:!0}))}}},{key:"log",value:function(){var e=this.state.current;this.state.maps[e].map.map.printMap()}},{key:"nextMap",value:function(){this.state.current>=4?this.setState({current:0}):this.setState({current:this.state.current+1})}},{key:"previousMap",value:function(){}},{key:"render",value:function(){var e=this.state.current,t=this.state.maps[e].map.map.map((function(e,t){var r=e.map((function(e,t){return w(e.getType())}));return l.a.createElement("tr",null," ",r," ")}));return l.a.createElement("div",null,l.a.createElement("button",{onClick:this.findPath}," Find path"),l.a.createElement("button",{onClick:this.log}," log"),l.a.createElement("button",{onClick:this.previousMap}," ","<"," "),l.a.createElement("button",{onClick:this.nextMap}," ",">"," "),"   Map number: "," ",this.state.current,l.a.createElement("table",null,t))}}]),r}(l.a.Component);c.a.render(l.a.createElement(M,null),document.getElementById("root"))},8:function(e,t,r){e.exports=r(14)}},[[8,1,2]]]);
//# sourceMappingURL=main.93409ab8.chunk.js.map